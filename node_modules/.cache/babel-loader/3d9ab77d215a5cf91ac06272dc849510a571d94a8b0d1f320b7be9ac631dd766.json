{"ast":null,"code":"var _jsxFileName = \"/Users/alekspavlov/Desktop/Kood-Johvi/social-network/src/components/list/components/postChip/comment.tsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport \"./comment.css\";\nimport { useNavigate } from 'react-router-dom';\nimport { ImageGet } from \"../../../../utils/ImageControl\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PostComment = ({\n  data\n}) => {\n  _s();\n  const navigate = useNavigate();\n  const [avatarImage, setAvatarImage] = useState('');\n  const [commentImage, setCommentImage] = useState('');\n  const fetchCommentImage = async () => {\n    await ImageGet(`comment/${data.commentId}`, setCommentImage);\n  };\n  const fetchAvatarImage = async () => {\n    await ImageGet(`user/${data.commentCreator.creatorId}`, setAvatarImage);\n  };\n  useEffect(() => {\n    fetchCommentImage();\n    fetchAvatarImage();\n    console.log(data.postVotesTarget);\n    if (data.postVotesTarget === 1) {\n      setSelectedUp(true);\n    } else if (data.postVotesTarget === -1) {\n      setSelectedDown(true);\n    }\n  }, [data]);\n  const [selectedUp, setSelectedUp] = useState(false);\n  const [selectedDown, setSelectedDown] = useState(false);\n  const [postVotes, changeVotes] = useState(data.commentVotes);\n  const voteHandler = async (signal, event) => {\n    const target = event.target;\n    if (target.id === 'postUpVote' && selectedUp === true) return;\n    if (target.id === 'postDownVote' && selectedDown === true) return;\n    const targetSignal = signal ? 1 : -1;\n    const votes = signal ? postVotes + 1 : postVotes - 1;\n    let sendData = {\n      votes: votes,\n      target: targetSignal\n    };\n    fetch(`http://localhost:8080/api/posts/comment/vote/${data.commentId}`, {\n      credentials: \"include\",\n      method: \"POST\",\n      body: JSON.stringify(sendData)\n    }).then(async response => {\n      if (!response.ok) {\n        console.error(response);\n        return;\n      }\n      const recData = await response.json();\n      changeVotes(recData.Votes);\n      switch (recData.Target) {\n        case -1:\n          setSelectedUp(false);\n          setSelectedDown(true);\n          break;\n        case 1:\n          setSelectedUp(true);\n          setSelectedDown(false);\n          break;\n        default:\n          setSelectedUp(false);\n          setSelectedDown(false);\n      }\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"post-comment\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post-comment__header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"post-comment__creator--wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"post-comment__creator-avatar\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: avatarImage,\n            loading: \"lazy\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"post-comment__creator-name\",\n          id: data.commentCreator.creatorId,\n          onClick: () => {\n            navigate(`/users/${data.commentCreator.creatorId}`);\n          },\n          children: data.commentCreator.creatorName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"post-comment__time\",\n        children: data.commentTime\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post-comment__main\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"post-comment-main__content-text\",\n        children: data.commentContent\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"post-comment-main__content-image\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: commentImage,\n          loading: \"lazy\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post-comment__options\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: `post-comment__vote up-vote ${selectedUp ? 'voted' : ''}`,\n        id: \"postUpVote\",\n        onClick: e => {\n          voteHandler(true, e);\n        },\n        src: \"/assets/UpVote.svg\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"post-comment__vote-number\",\n        children: postVotes\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        className: `post-comment__vote down-vote ${selectedDown ? 'voted' : ''}`,\n        id: \"postDownVote\",\n        onClick: e => {\n          voteHandler(false, e);\n        },\n        src: \"/assets/DownVote.svg\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 9\n  }, this);\n};\n_s(PostComment, \"pY5GzdNAnjbg6OmbETGm41FC68U=\", false, function () {\n  return [useNavigate];\n});\n_c = PostComment;\nexport default PostComment;\nvar _c;\n$RefreshReg$(_c, \"PostComment\");","map":{"version":3,"names":["useEffect","useState","useNavigate","ImageGet","jsxDEV","_jsxDEV","PostComment","data","_s","navigate","avatarImage","setAvatarImage","commentImage","setCommentImage","fetchCommentImage","commentId","fetchAvatarImage","commentCreator","creatorId","console","log","postVotesTarget","setSelectedUp","setSelectedDown","selectedUp","selectedDown","postVotes","changeVotes","commentVotes","voteHandler","signal","event","target","id","targetSignal","votes","sendData","fetch","credentials","method","body","JSON","stringify","then","response","ok","error","recData","json","Votes","Target","className","children","src","loading","fileName","_jsxFileName","lineNumber","columnNumber","onClick","creatorName","commentTime","commentContent","e","_c","$RefreshReg$"],"sources":["/Users/alekspavlov/Desktop/Kood-Johvi/social-network/src/components/list/components/postChip/comment.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport \"./comment.css\";\nimport { useNavigate } from 'react-router-dom'\nimport { ImageGet } from \"../../../../utils/ImageControl\";\n\ninterface voteData {\n    votes: number\n    target: number\n}\n\nconst PostComment = ({ data }: any): JSX.Element => {\n    const navigate = useNavigate()\n    const [avatarImage, setAvatarImage] = useState('')\n    const [commentImage, setCommentImage] = useState('')\n    const fetchCommentImage = async () => {\n        await ImageGet(`comment/${data.commentId}`, setCommentImage)\n    }\n    const fetchAvatarImage = async () => {\n        await ImageGet(`user/${data.commentCreator.creatorId}`, setAvatarImage)\n    }\n    useEffect(() => {\n        fetchCommentImage()\n        fetchAvatarImage()\n        console.log(data.postVotesTarget)\n        if (data.postVotesTarget === 1) {\n            setSelectedUp(true)\n        } else if (data.postVotesTarget === -1) {\n            setSelectedDown(true)\n        }\n    }, [data])\n\n    const [selectedUp, setSelectedUp] = useState(false)\n    const [selectedDown, setSelectedDown] = useState(false)\n    const [postVotes, changeVotes] = useState(data.commentVotes)\n\n    const voteHandler = async (signal: boolean, event: React.MouseEvent<HTMLImageElement>) => {\n        const target = event.target as HTMLElement\n        if (target.id === 'postUpVote' && selectedUp === true) return\n        if (target.id === 'postDownVote' && selectedDown === true) return\n\n        const targetSignal = signal ? 1 : -1\n        const votes = signal ? postVotes + 1 : postVotes - 1\n        let sendData: voteData = {\n            votes: votes,\n            target: targetSignal\n        }\n        fetch(`http://localhost:8080/api/posts/comment/vote/${data.commentId}`, {\n            credentials: \"include\",\n            method: \"POST\",\n            body: JSON.stringify(sendData)\n        })\n            .then(async (response) => {\n                if (!response.ok) {\n                    console.error(response)\n                    return\n                }\n                const recData = await response.json()\n                changeVotes(recData.Votes)\n                switch (recData.Target) {\n                    case -1:\n                        setSelectedUp(false)\n                        setSelectedDown(true)\n                        break\n                    case 1:\n                        setSelectedUp(true)\n                        setSelectedDown(false)\n                        break\n                    default:\n                        setSelectedUp(false)\n                        setSelectedDown(false)\n                }\n            })\n    }\n    return (\n        <div className=\"post-comment\">\n            <div className=\"post-comment__header\">\n                <div className=\"post-comment__creator--wrapper\">\n                    <div className=\"post-comment__creator-avatar\" >\n                        <img src={avatarImage} loading=\"lazy\" />\n                    </div>\n                    <div className=\"post-comment__creator-name\"\n                        id={data.commentCreator.creatorId}\n                        onClick={() => { navigate(`/users/${data.commentCreator.creatorId}`) }}>\n                        {data.commentCreator.creatorName}\n                    </div>\n                </div>\n                <div className=\"post-comment__time\">{data.commentTime}</div>\n            </div>\n            <div className=\"post-comment__main\">\n                <div className=\"post-comment-main__content-text\">{data.commentContent}</div>\n                <div className=\"post-comment-main__content-image\">\n                    <img src={commentImage} loading=\"lazy\" />\n                </div>\n            </div>\n            <div className=\"post-comment__options\">\n                <img className={`post-comment__vote up-vote ${selectedUp ? 'voted' : ''}`}\n                    id='postUpVote'\n                    onClick={(e) => { voteHandler(true, e) }}\n                    src='/assets/UpVote.svg' />\n                <div className=\"post-comment__vote-number\">{postVotes}</div>\n                <img className={`post-comment__vote down-vote ${selectedDown ? 'voted' : ''}`}\n                    id='postDownVote'\n                    onClick={(e) => { voteHandler(false, e) }}\n                    src='/assets/DownVote.svg' />\n            </div>\n        </div>\n    );\n};\nexport default PostComment"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}