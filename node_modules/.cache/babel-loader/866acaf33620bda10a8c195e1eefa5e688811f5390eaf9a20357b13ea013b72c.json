{"ast":null,"code":"var _jsxFileName = \"/Users/alekspavlov/Desktop/Kood-Johvi/social-network/src/Pages/LoginPage/LoginPage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport './login.css';\nimport { Link, useNavigate } from 'react-router-dom';\nimport isAuth from '../../utils/authCheck';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LoginPage = ({\n  setLogin\n}) => {\n  _s();\n  const navigate = useNavigate();\n  const [formData, setFormData] = useState({\n    login: '',\n    password: ''\n  });\n  const [error, setError] = useState('');\n\n  /** Validate user input */\n  const ValidData = data => {\n    //Validate data on submit \n    if (data.login === '') return 'Email/UserName is required';\n    //regex test if the string has @ -> it needs to be in correct format\n    if (data.login.includes('@') && !/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]+/.test(data.login)) {\n      return 'Email should be in correct format';\n    }\n    if (data.password === '') {\n      return 'Password is required';\n    }\n    if (data.password.length < 6) {\n      return 'Password is minimum 6 characters';\n    }\n    return '';\n  };\n  useEffect(() => {\n    isAuth().then(isLogged => {\n      if (isLogged === true) {\n        navigate('/');\n      }\n    });\n  }, []);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    let message;\n    if (message = ValidData(formData)) {\n      setError(message);\n      return;\n    }\n    await fetch('http://localhost:8080/api/login', {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      credentials: \"include\",\n      body: JSON.stringify(formData)\n    }).then(async response => {\n      //if we recieve error from backend\n      switch (response.status) {\n        case 200:\n          console.log('Logged succesfully');\n          setLogin(true);\n          navigate('/');\n          break;\n        case 404:\n          console.log('NOT FOUND');\n          break;\n        default:\n          const errMsg = await response.text();\n          setError(errMsg);\n      }\n    }).catch(error => {\n      //catch error if there is problem with fetch method\n      console.error(error);\n    });\n  };\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prevData => ({\n      ...prevData,\n      [name]: value\n    }));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"loginpage\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-page__wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"welcome-back-container\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"welcome-back-glow\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"welcome\",\n            children: \"WELCOME\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"welcome\",\n            children: \"BACK TO\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"welcome\",\n            children: \"S0c1al-\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"welcome\",\n            children: \"N3TW0rK\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-parent\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loginTitle\",\n          children: \"LOGIN\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"loginForm\",\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"loginInput\",\n            placeholder: \"email || username\",\n            name: \"login\",\n            type: \"text\",\n            maxLength: 254,\n            value: formData.login,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"loginInput\",\n            placeholder: \"password\",\n            type: \"password\",\n            name: \"password\",\n            maxLength: 254,\n            value: formData.password,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"button\",\n            children: \"SUBMIT\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, this), error != '' && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"auth-error-text\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 37\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/register\",\n          className: \"link-to-register\",\n          children: \"<Don't have account?>\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 9\n  }, this);\n};\n_s(LoginPage, \"zLaOJzc3VWX6iravnyOKC4dMdOY=\", false, function () {\n  return [useNavigate];\n});\n_c = LoginPage;\nexport default LoginPage;\nvar _c;\n$RefreshReg$(_c, \"LoginPage\");","map":{"version":3,"names":["React","useEffect","useState","Link","useNavigate","isAuth","jsxDEV","_jsxDEV","LoginPage","setLogin","_s","navigate","formData","setFormData","login","password","error","setError","ValidData","data","includes","test","length","then","isLogged","handleSubmit","e","preventDefault","message","fetch","method","headers","credentials","body","JSON","stringify","response","status","console","log","errMsg","text","catch","handleChange","name","value","target","prevData","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","placeholder","type","maxLength","onChange","to","_c","$RefreshReg$"],"sources":["/Users/alekspavlov/Desktop/Kood-Johvi/social-network/src/Pages/LoginPage/LoginPage.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport './login.css'\nimport { Link, useNavigate } from 'react-router-dom'\nimport isAuth from '../../utils/authCheck'\nimport { RegisterPageProps } from '../RegisterPage/RegisterPage'\n\n\n\nconst LoginPage: React.FC<RegisterPageProps> = ({ setLogin }) => {\n    const navigate = useNavigate()\n    const [formData, setFormData] = useState({ login: '', password: '' })\n    const [error, setError] = useState('')\n\n    /** Validate user input */\n    const ValidData = (data: { login: string, password: string }) => { //Validate data on submit \n        if (data.login === '') return 'Email/UserName is required'\n        //regex test if the string has @ -> it needs to be in correct format\n        if (data.login.includes('@') && !/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]+/.test(data.login)) {\n            return 'Email should be in correct format'\n        }\n        if (data.password === '') { return 'Password is required' }\n        if (data.password.length < 6) { return 'Password is minimum 6 characters' }\n        return ''\n    }\n\n    useEffect(() => {\n        isAuth().then((isLogged) => {\n            if (isLogged === true) {\n                navigate('/')\n            }\n        })\n    }, [])\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault()\n        let message: string\n        if (message = ValidData(formData)) {\n            setError(message)\n            return\n        }\n        await fetch('http://localhost:8080/api/login', {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/json\", },\n            credentials: \"include\",\n            body: JSON.stringify(formData)\n        })\n            .then(async (response) => { //if we recieve error from backend\n                switch (response.status) {\n                    case 200:\n                        console.log('Logged succesfully')\n                        setLogin(true)\n                        navigate('/')\n                        break\n                    case 404:\n                        console.log('NOT FOUND')\n                        break\n                    default:\n                        const errMsg = await response.text()\n                        setError(errMsg)\n                }\n            }).catch((error) => { //catch error if there is problem with fetch method\n                console.error(error)\n            })\n    }\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const { name, value } = e.target\n        setFormData((prevData) => ({\n            ...prevData,\n            [name]: value,\n        }))\n    }\n\n    return (\n        <div className=\"loginpage\">\n            <div className='login-page__wrapper'>\n                <div className=\"welcome-back-container\">\n                    <span className=\"welcome-back-glow\">\n                        <p className=\"welcome\">WELCOME</p>\n                        <p className=\"welcome\">BACK TO</p>\n                        <p className=\"welcome\">S0c1al-</p>\n                        <p className=\"welcome\">N3TW0rK</p>\n                    </span>\n                </div>\n                <div className=\"form-parent\">\n                    <div className=\"loginTitle\">LOGIN</div>\n                    <form className=\"loginForm\" onSubmit={handleSubmit}>\n                        <input\n                            className=\"loginInput\"\n                            placeholder=\"email || username\"\n                            name=\"login\"\n                            type='text'\n                            maxLength={254}\n                            value={formData.login}\n                            onChange={handleChange}\n\n                        />\n                        <input\n                            className=\"loginInput\"\n                            placeholder=\"password\"\n                            type=\"password\"\n                            name=\"password\"\n                            maxLength={254}\n                            value={formData.password}\n                            onChange={handleChange}\n                        />\n                        <button className=\"button\">SUBMIT</button>\n                    </form>\n                    {error != '' && <p className='auth-error-text'>{error}</p>}\n                    <Link to=\"/register\" className=\"link-to-register\">\n                        &lt;Don't have account?&gt;\n                    </Link>\n                </div>\n            </div>\n        </div>\n    )\n}\nexport default LoginPage\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}